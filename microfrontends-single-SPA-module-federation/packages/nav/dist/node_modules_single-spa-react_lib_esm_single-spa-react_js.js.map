{"version":3,"file":"node_modules_single-spa-react_lib_esm_single-spa-react_js.js","mappings":"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","sources":["webpack://search/../../node_modules/.pnpm/dom-element-getter-helpers@1.1.1/node_modules/dom-element-getter-helpers/lib/dom-element-getter-helpers.js","webpack://search/../../src/single-spa-react.js"],"sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport function chooseDomElementGetter(opts, props) {\n  var domElementGetter;\n\n  if (props.domElement) {\n    domElementGetter = function domElementGetter() {\n      return props.domElement;\n    };\n  } else if (props.domElementGetter) {\n    domElementGetter = props.domElementGetter;\n  } else if (opts.domElementGetter) {\n    domElementGetter = opts.domElementGetter;\n  } else {\n    domElementGetter = defaultDomElementGetter(props);\n  }\n\n  if (typeof domElementGetter !== \"function\") {\n    throw Error(\"single-spa's dom-element-getter-helpers was given an invalid domElementGetter for application or parcel '\".concat(props.name, \"'. Expected a function, received \").concat(_typeof(domElementGetter)));\n  }\n\n  return function () {\n    var domElement = domElementGetter(props);\n\n    if (!(domElement instanceof HTMLElement)) {\n      throw Error(\"single-spa's dom-element-getter-helpers: domElementGetter returned an invalid dom element for application or parcel '\".concat(props.name, \"'. Expected HTMLElement, received \").concat(_typeof(domElement)));\n    }\n\n    return domElement;\n  };\n}\n\nfunction defaultDomElementGetter(props) {\n  var appName = props.appName || props.name;\n\n  if (!appName) {\n    throw Error(\"single-spa's dom-element-getter-helpers was not given an application name as a prop, so it can't make a unique dom element container for the react application\");\n  }\n\n  var htmlId = \"single-spa-application:\".concat(appName);\n  return function defaultDomEl() {\n    var domElement = document.getElementById(htmlId);\n\n    if (!domElement) {\n      domElement = document.createElement(\"div\");\n      domElement.id = htmlId;\n      document.body.appendChild(domElement);\n    }\n\n    return domElement;\n  };\n}\n","/* We don't import parcel.component.js from this file intentionally. See comment\n * in that file for why\n */\n\nimport { chooseDomElementGetter } from \"dom-element-getter-helpers\";\n\n// React context that gives any react component the single-spa props\nexport let SingleSpaContext = null;\n\n// This try/catch exists mostly to prevent rollup from thinking that SingleSpaContext\n// is null and then doing optimizations in parcel.js that cause bugs.\n// See https://github.com/single-spa/single-spa-react/issues/105\n\ntry {\n  // single-spa-react is usable as a global script, as a systemjs module, and other\n  // situations where require() is unavailable. This is why we require the user to\n  // pass in opts.React and opts.ReactDOM - to avoid the mess of \"how do i properly load react\".\n  // However, in situations where require() is available, we can use it this way to create\n  // the react context. The try/catch defensiveness keeps single-spa-react working in\n  // as many situations as possible.\n  SingleSpaContext = require(\"react\").createContext();\n} catch {\n  // ignore\n}\n\nconst defaultOpts = {\n  // required opts\n  React: null,\n  ReactDOM: null,\n\n  // required - one or the other\n  rootComponent: null,\n  loadRootComponent: null,\n\n  // optional opts\n  renderType: null,\n  errorBoundary: null,\n  errorBoundaryClass: null,\n  domElementGetter: null,\n  parcelCanUpdate: true, // by default, allow parcels created with single-spa-react to be updated\n  suppressComponentDidCatchWarning: false,\n  domElements: {},\n  renderResults: {},\n  updateResolves: {},\n};\n\nexport default function singleSpaReact(userOpts) {\n  if (typeof userOpts !== \"object\") {\n    throw new Error(`single-spa-react requires a configuration object`);\n  }\n\n  const opts = {\n    ...defaultOpts,\n    ...userOpts,\n  };\n\n  if (!opts.React) {\n    throw new Error(`single-spa-react must be passed opts.React`);\n  }\n\n  if (!opts.ReactDOM) {\n    throw new Error(`single-spa-react must be passed opts.ReactDOM`);\n  }\n\n  if (!opts.rootComponent && !opts.loadRootComponent) {\n    throw new Error(\n      `single-spa-react must be passed opts.rootComponent or opts.loadRootComponent`\n    );\n  }\n\n  if (opts.errorBoundary && typeof opts.errorBoundary !== \"function\") {\n    throw Error(\n      `The errorBoundary opt for single-spa-react must either be omitted or be a function that returns React elements`\n    );\n  }\n\n  if (!SingleSpaContext && opts.React.createContext) {\n    SingleSpaContext = opts.React.createContext();\n  }\n\n  opts.SingleSpaRoot = createSingleSpaRoot(opts);\n\n  const lifecycles = {\n    bootstrap: bootstrap.bind(null, opts),\n    mount: mount.bind(null, opts),\n    unmount: unmount.bind(null, opts),\n  };\n\n  if (opts.parcelCanUpdate) {\n    lifecycles.update = update.bind(null, opts);\n  }\n\n  return lifecycles;\n}\n\nfunction bootstrap(opts, props) {\n  if (opts.rootComponent) {\n    // This is a class or stateless function component\n    return Promise.resolve();\n  } else {\n    // They passed a promise that resolves with the react component. Wait for it to resolve before mounting\n    return opts.loadRootComponent(props).then((resolvedComponent) => {\n      opts.rootComponent = resolvedComponent;\n    });\n  }\n}\n\nfunction mount(opts, props) {\n  return new Promise((resolve, reject) => {\n    if (\n      !opts.suppressComponentDidCatchWarning &&\n      atLeastReact16(opts.React) &&\n      !opts.errorBoundary\n    ) {\n      if (!opts.rootComponent.prototype) {\n        console.warn(\n          `single-spa-react: ${\n            props.name || props.appName || props.childAppName\n          }'s rootComponent does not implement an error boundary.  If using a functional component, consider providing an opts.errorBoundary to singleSpaReact(opts).`\n        );\n      } else if (!opts.rootComponent.prototype.componentDidCatch) {\n        console.warn(\n          `single-spa-react: ${\n            props.name || props.appName || props.childAppName\n          }'s rootComponent should implement componentDidCatch to avoid accidentally unmounting the entire single-spa application.`\n        );\n      }\n    }\n\n    const whenMounted = function () {\n      resolve(this);\n    };\n\n    const elementToRender = getElementToRender(opts, props, whenMounted);\n    const domElement = chooseDomElementGetter(opts, props)();\n    const renderResult = reactDomRender({\n      elementToRender,\n      domElement,\n      opts,\n    });\n    opts.domElements[props.name] = domElement;\n    opts.renderResults[props.name] = renderResult;\n  });\n}\n\nfunction unmount(opts, props) {\n  return new Promise((resolve) => {\n    opts.unmountFinished = resolve;\n\n    const root = opts.renderResults[props.name];\n\n    if (root && root.unmount) {\n      // React >= 18\n      const unmountResult = root.unmount();\n    } else {\n      // React < 18\n      opts.ReactDOM.unmountComponentAtNode(opts.domElements[props.name]);\n    }\n    delete opts.domElements[props.name];\n    delete opts.renderResults[props.name];\n  });\n}\n\nfunction update(opts, props) {\n  return new Promise((resolve) => {\n    if (!opts.updateResolves[props.name]) {\n      opts.updateResolves[props.name] = [];\n    }\n\n    opts.updateResolves[props.name].push(resolve);\n\n    const elementToRender = getElementToRender(opts, props, null);\n    const renderRoot = opts.renderResults[props.name];\n    if (renderRoot && renderRoot.render) {\n      // React 18 with ReactDOM.createRoot()\n      renderRoot.render(elementToRender);\n    } else {\n      // React 16 / 17 with ReactDOM.render()\n      const domElement = chooseDomElementGetter(opts, props)();\n\n      // This is the old way to update a react application - just call render() again\n      opts.ReactDOM.render(elementToRender, domElement);\n    }\n  });\n}\n\nfunction atLeastReact16(React) {\n  if (\n    React &&\n    typeof React.version === \"string\" &&\n    React.version.indexOf(\".\") >= 0\n  ) {\n    const majorVersionString = React.version.slice(\n      0,\n      React.version.indexOf(\".\")\n    );\n    try {\n      return Number(majorVersionString) >= 16;\n    } catch (err) {\n      return false;\n    }\n  } else {\n    return false;\n  }\n}\n\nfunction reactDomRender({ opts, elementToRender, domElement }) {\n  const renderType =\n    typeof opts.renderType === \"function\" ? opts.renderType() : opts.renderType;\n  if (\n    [\n      \"createRoot\",\n      \"unstable_createRoot\",\n      \"createBlockingRoot\",\n      \"unstable_createBlockingRoot\",\n    ].indexOf(renderType) >= 0\n  ) {\n    const root = opts.ReactDOM[renderType](domElement);\n    root.render(elementToRender);\n    return root;\n  }\n\n  if (renderType === \"hydrate\") {\n    opts.ReactDOM.hydrate(elementToRender, domElement);\n  } else {\n    // default to this if 'renderType' is null or doesn't match the other options\n    opts.ReactDOM.render(elementToRender, domElement);\n  }\n\n  // The reactDomRender function should return a react root, but ReactDOM.hydrate() and ReactDOM.render()\n  // do not return a react root. So instead, we return null which indicates that there is no react root\n  // that can be used for updates or unmounting\n  return null;\n}\n\nfunction getElementToRender(opts, props, mountFinished) {\n  const rootComponentElement = opts.React.createElement(\n    opts.rootComponent,\n    props\n  );\n\n  let elementToRender = SingleSpaContext\n    ? opts.React.createElement(\n        SingleSpaContext.Provider,\n        { value: props },\n        rootComponentElement\n      )\n    : rootComponentElement;\n\n  if (\n    opts.errorBoundary ||\n    props.errorBoundary ||\n    opts.errorBoundaryClass ||\n    props.errorBoundaryClass\n  ) {\n    opts.errorBoundaryClass =\n      opts.errorBoundaryClass ||\n      props.errorBoundaryClass ||\n      createErrorBoundary(opts, props);\n    elementToRender = opts.React.createElement(\n      opts.errorBoundaryClass,\n      props,\n      elementToRender\n    );\n  }\n\n  // https://github.com/single-spa/single-spa-react/issues/112\n  elementToRender = opts.React.createElement(\n    opts.SingleSpaRoot,\n    {\n      ...props,\n      mountFinished,\n      updateFinished() {\n        if (opts.updateResolves[props.name]) {\n          opts.updateResolves[props.name].forEach((r) => r());\n          delete opts.updateResolves[props.name];\n        }\n      },\n      unmountFinished() {\n        setTimeout(opts.unmountFinished);\n      },\n    },\n    elementToRender\n  );\n\n  return elementToRender;\n}\n\nfunction createErrorBoundary(opts, props) {\n  // Avoiding babel output for class syntax and super()\n  // to avoid bloat\n  function SingleSpaReactErrorBoundary(props) {\n    // super\n    opts.React.Component.apply(this, arguments);\n\n    this.state = {\n      caughtError: null,\n      caughtErrorInfo: null,\n    };\n\n    SingleSpaReactErrorBoundary.displayName = `SingleSpaReactErrorBoundary(${props.name})`;\n  }\n\n  SingleSpaReactErrorBoundary.prototype = Object.create(\n    opts.React.Component.prototype\n  );\n\n  SingleSpaReactErrorBoundary.prototype.render = function () {\n    if (this.state.caughtError) {\n      const errorBoundary = opts.errorBoundary || props.errorBoundary;\n\n      return errorBoundary(\n        this.state.caughtError,\n        this.state.caughtErrorInfo,\n        this.props\n      );\n    } else {\n      return this.props.children;\n    }\n  };\n\n  SingleSpaReactErrorBoundary.prototype.componentDidCatch = function (\n    err,\n    info\n  ) {\n    this.setState({\n      caughtError: err,\n      caughtErrorInfo: info,\n    });\n  };\n\n  return SingleSpaReactErrorBoundary;\n}\n\nfunction createSingleSpaRoot(opts) {\n  // This is a class component, since we need a mount hook and single-spa-react supports React@15 (no useEffect available)\n  function SingleSpaRoot(_props) {\n    SingleSpaRoot.displayName = `SingleSpaRoot(${_props.name})`;\n  }\n\n  SingleSpaRoot.prototype = Object.create(opts.React.Component.prototype);\n  SingleSpaRoot.prototype.componentDidMount = function () {\n    setTimeout(this.props.mountFinished);\n  };\n  SingleSpaRoot.prototype.componentWillUnmount = function () {\n    setTimeout(this.props.unmountFinished);\n  };\n  SingleSpaRoot.prototype.render = function () {\n    // componentDidUpdate doesn't seem to be called during root.render() for updates\n    setTimeout(this.props.updateFinished);\n\n    return this.props.children;\n  };\n\n  return SingleSpaRoot;\n}\n"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","chooseDomElementGetter","opts","props","domElementGetter","domElement","appName","name","Error","htmlId","concat","document","getElementById","createElement","id","body","appendChild","defaultDomElementGetter","HTMLElement","SingleSpaContext","require","createContext","defaultOpts","React","ReactDOM","rootComponent","loadRootComponent","renderType","errorBoundary","errorBoundaryClass","parcelCanUpdate","suppressComponentDidCatchWarning","domElements","renderResults","updateResolves","singleSpaReact","userOpts","SingleSpaRoot","_props","displayName","Object","create","Component","componentDidMount","setTimeout","this","mountFinished","componentWillUnmount","unmountFinished","render","updateFinished","children","createSingleSpaRoot","lifecycles","bootstrap","bind","mount","unmount","update","Promise","resolve","then","resolvedComponent","reject","version","indexOf","majorVersionString","slice","Number","err","atLeastReact16","componentDidCatch","console","warn","childAppName","elementToRender","getElementToRender","renderResult","root","hydrate","reactDomRender","unmountComponentAtNode","push","renderRoot","rootComponentElement","Provider","value","SingleSpaReactErrorBoundary","apply","arguments","state","caughtError","caughtErrorInfo","info","setState","createErrorBoundary","forEach","r"],"sourceRoot":""}